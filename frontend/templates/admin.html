<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administration - Plateforme Jurisprudence</title>
    <link rel="stylesheet" href="/static/css/moa-design.css">
    <style>
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 3px dotted #3b82f6;
            padding-bottom: 0.5rem;
        }
        .tab {
            padding: 0.75rem 1.5rem;
            background: white;
            border: 3px dotted #d1d5db;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }
        .tab.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .data-table th, .data-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        .data-table th {
            background: #f9fafb;
            font-weight: 600;
        }
        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }
        .btn-small {
            padding: 0.4rem 0.8rem;
            font-size: 0.875rem;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        .modal.active {
            display: flex;
        }
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            border: 3px dotted #3b82f6;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container navbar-content">
            <a href="/dashboard" class="navbar-brand">Jurisprudence</a>
            <div class="navbar-nav">
                <a href="/dashboard" class="nav-link">Tableau de bord</a>
                <a href="/search" class="nav-link">Recherche IA</a>
                <a href="/admin" class="nav-link">Administration</a>
                <button id="logout-btn" class="btn-secondary">Déconnexion</button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <h1>Panneau d'administration</h1>
        
        <div id="alert-container"></div>
        
        <div class="tabs">
            <div class="tab active" onclick="switchTab('users', event)">Gestion des Utilisateurs</div>
            <div class="tab" onclick="switchTab('cases', event)">Gestion de la Jurisprudence</div>
            <div class="tab" onclick="switchTab('import', event)">Importation de Données</div>
            <div class="tab" onclick="switchTab('add-case', event)">Ajouter un Cas</div>
        </div>
        
        <div id="users-tab" class="tab-content active">
            <div class="section-violet">
                <h2>Gestion des Utilisateurs</h2>
                
                <div class="filters">
                    <button class="btn-primary btn-small" onclick="filterUsers('all', event)">Tous</button>
                    <button class="btn-secondary btn-small" onclick="filterUsers('pending', event)">En attente</button>
                    <button class="btn-secondary btn-small" onclick="filterUsers('approved', event)">Approuvés</button>
                </div>
                
                <div id="users-list">
                    <p style="color: #6b7280; text-align: center; padding: 2rem;">Chargement...</p>
                </div>
            </div>
        </div>
        
        <div id="cases-tab" class="tab-content">
            <div class="section-green">
                <h2>Base de Jurisprudence</h2>
                <div id="cases-list">
                    <p style="color: #6b7280; text-align: center; padding: 2rem;">Chargement...</p>
                </div>
            </div>
        </div>
        
        <div id="import-tab" class="tab-content">
            <div class="card">
                <h2>Importation en Masse</h2>
                
                <div class="section-blue mb-4">
                    <h3>Importer depuis CSV ou Excel</h3>
                    <p style="font-size: 0.9rem; color: #6b7280; margin-bottom: 1rem;">
                        Colonnes requises: case_number, title, description, facts, decision, court, date_decision, category, keywords
                    </p>
                    <input type="file" id="csv-file" accept=".csv,.xlsx,.xls" class="input-field">
                    <button onclick="importCSV()" class="btn-primary mt-2">Importer CSV/Excel</button>
                </div>
                
                <div class="section-violet">
                    <h3>Importer depuis PDF</h3>
                    <p style="font-size: 0.9rem; color: #6b7280; margin-bottom: 1rem;">
                        Le texte sera extrait automatiquement du PDF
                    </p>
                    <form id="pdf-import-form">
                        <div class="grid grid-2">
                            <div class="form-group">
                                <label class="form-label">Numéro de cas</label>
                                <input type="text" id="pdf-case-number" class="input-field" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tribunal</label>
                                <input type="text" id="pdf-court" class="input-field" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Titre</label>
                            <input type="text" id="pdf-title" class="input-field" required>
                        </div>
                        <div class="grid grid-2">
                            <div class="form-group">
                                <label class="form-label">Catégorie</label>
                                <input type="text" id="pdf-category" class="input-field" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Date</label>
                                <input type="date" id="pdf-date" class="input-field" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Fichier PDF</label>
                            <input type="file" id="pdf-file" accept=".pdf" class="input-field" required>
                        </div>
                        <button type="submit" class="btn-primary">Importer PDF</button>
                    </form>
                </div>
            </div>
        </div>
        
        <div id="add-case-tab" class="tab-content">
            <div class="card">
                <h2>Ajouter un cas de jurisprudence</h2>
                <form id="add-case-form">
                    <div class="grid grid-2">
                        <div class="form-group">
                            <label class="form-label" for="case_number">Numéro de cas</label>
                            <input type="text" id="case_number" class="input-field" placeholder="Ex: 2024-123" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="court">Tribunal</label>
                            <input type="text" id="court" class="input-field" placeholder="Ex: Cour d'appel de Paris" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="title">Titre du cas</label>
                        <input type="text" id="title" class="input-field" placeholder="Titre descriptif du cas" required>
                    </div>
                    
                    <div class="grid grid-2">
                        <div class="form-group">
                            <label class="form-label" for="category">Catégorie</label>
                            <input type="text" id="category" class="input-field" placeholder="Ex: Droit civil" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="date_decision">Date de décision</label>
                            <input type="date" id="date_decision" class="input-field" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="description">Description</label>
                        <textarea id="description" class="input-field" rows="3" required style="resize: vertical;"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="facts">Faits</label>
                        <textarea id="facts" class="input-field" rows="3" required style="resize: vertical;"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="decision">Décision</label>
                        <textarea id="decision" class="input-field" rows="3" required style="resize: vertical;"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="keywords">Mots-clés (séparés par des virgules)</label>
                        <input type="text" id="keywords" class="input-field" placeholder="contrat, responsabilité, dommages">
                    </div>
                    
                    <button type="submit" class="btn-primary">Ajouter le cas</button>
                </form>
            </div>
        </div>
    </div>
    
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <h2>Modifier le Cas</h2>
            <form id="edit-case-form">
                <input type="hidden" id="edit-case-id">
                <div class="form-group">
                    <label class="form-label">Numéro de cas</label>
                    <input type="text" id="edit-case-number" class="input-field" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Titre</label>
                    <input type="text" id="edit-title" class="input-field" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Tribunal</label>
                    <input type="text" id="edit-court" class="input-field" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Catégorie</label>
                    <input type="text" id="edit-category" class="input-field" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" id="edit-date" class="input-field" required>
                </div>
                <div class="action-buttons">
                    <button type="submit" class="btn-primary">Sauvegarder</button>
                    <button type="button" class="btn-secondary" onclick="closeModal()">Annuler</button>
                </div>
            </form>
        </div>
    </div>
    
    <script src="/static/js/admin.js"></script>
</body>
</html>
